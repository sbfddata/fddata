<!DOCTYPE html>
<html lang="si">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Investment System</title>
    <style>
        :root { --primary: #2c3e50; --accent: #27ae60; --danger: #e74c3c; --blue: #3498db; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f4f7f9; margin: 0; color: #333; }
        .container { max-width: 1000px; margin: auto; padding: 20px; }
        
        /* Login Box */
        .login-card { width: 350px; margin: 100px auto; background: white; padding: 30px; border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); text-align: center; }
        
        /* Dashboard */
        .card { background: white; padding: 25px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.05); margin-bottom: 20px; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 15px; }
        input { padding: 12px; border: 1px solid #ddd; border-radius: 6px; width: 100%; box-sizing: border-box; font-size: 14px; }
        
        /* Buttons */
        .btn-group { display: flex; gap: 10px; margin-top: 20px; flex-wrap: wrap; }
        button { padding: 12px 20px; border: none; border-radius: 6px; cursor: pointer; font-weight: 600; transition: 0.3s; color: white; }
        .btn-add { background: var(--accent); }
        .btn-search { background: var(--blue); }
        .btn-clear { background: #f39c12; }
        .btn-del { background: var(--danger); }
        .btn-print { background: #8e44ad; }
        button:hover { opacity: 0.8; transform: translateY(-2px); }

        .hidden { display: none; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; font-size: 13px; }
        th, td { border: 1px solid #ddd; padding: 10px; text-align: left; }
        th { background: #f8f9fa; }

        @media print { .no-print { display: none; } .container { width: 100%; } }
    </style>
</head>
<body>

    <div id="login-screen" class="login-card">
        <h2>Investment System</h2>
        <input type="text" id="user" placeholder="පරිශීලක නාමය (Gamini)"><br><br>
        <input type="password" id="pass" placeholder="මුරපදය (900000000)"><br><br>
        <button class="btn-add" style="width: 100%;" onclick="login()">Log In</button>
    </div>

    <div id="main-dashboard" class="container hidden">
        <div class="card no-print">
            <h2 style="color: var(--primary);">Investment Dashboard</h2>
            <hr>
            <div class="grid">
                <input type="text" id="bankName" placeholder="ආයෝජන මුදල අයත් බැංකුව">
                <input type="text" id="investBank" placeholder="ආයෝජනය කළ බැංකුව">
                <input type="date" id="date">
                <input type="text" id="receiptNo" placeholder="ආයෝජන රිසිට්පත් අංකය">
                <input type="number" id="amount" placeholder="ආයෝජන මුදල (රු)">
                <input type="text" id="period" placeholder="කාලය (මාස 03)">
                <input type="date" id="matureDate" placeholder="කල්පිරෙන දිනය">
                <input type="text" id="rate" placeholder="පොලී ප්‍රතිශතය %">
                <input type="number" id="interest" placeholder="ලැබෙන පොලිය">
                <input type="text" id="chequeNo" placeholder="චෙක්පත් අංකය">
            </div>

            <div class="btn-group">
                <button class="btn-add" onclick="processData('add')">Add Data</button>
                <button class="btn-clear" onclick="processData('clear')">Clear Print Page</button>
                <button class="btn-print" onclick="window.print()">Print List</button>
            </div>
        </div>

        <div class="card no-print" style="border-left: 5px solid var(--blue);">
            <h3>සෙවීම සහ මකා දැමීම (Search & Delete)</h3>
            <div style="display: flex; gap: 10px;">
                <input type="text" id="searchID" placeholder="රිසිට්පත් අංකය ඇතුළත් කරන්න...">
                <button class="btn-search" onclick="processData('search')">Search</button>
            </div>
            <div id="search-result" class="hidden" style="margin-top: 15px; background: #f0faff; padding: 15px; border-radius: 8px;">
                <p id="result-text"></p>
                <button class="btn-del" onclick="processData('delete')">Confirm Delete</button>
            </div>
        </div>

        <div class="card">
            <div style="display: flex; justify-content: space-between;">
                <div><b>සමෘද්ධි මහ සංගමය, පදියතලාව.</b></div>
                <div>දිනය: <span id="current-date"></span></div>
            </div>
            <h3 style="text-align: center; text-decoration: underline;">කරන ලද ආයෝජන පොලිය හා මුදල එවීම් නිවේදනය</h3>
            <table>
                <thead>
                    <tr>
                        <th>ආයෝජන මුදල</th>
                        <th>බැංකුව</th>
                        <th>රිසිට්පත් අංකය</th>
                        <th>පොලිය</th>
                        <th>කල්පිරෙන දිනය</th>
                    </tr>
                </thead>
                <tbody id="print-table-body">
                    </tbody>
            </table>
        </div>
    </div>

    <script>
        // *** මෙතනට ඔයාගේ Google Web App URL එක දාන්න ***
        const scriptURL = "ඔබේ_DEPLOY_URL_එක_මෙතනට";

        function login() {
            const u = document.getElementById('user').value;
            const p = document.getElementById('pass').value;
            if(u === "Gamini" && p === "900000000") {
                document.getElementById('login-screen').classList.add('hidden');
                document.getElementById('main-dashboard').classList.remove('hidden');
                document.getElementById('current-date').innerText = new Date().toLocaleDateString();
            } else {
                alert("පරිශීලක නාමය හෝ මුරපදය වැරදියි!");
            }
        }

        function processData(action) {
            if(action === 'add') {
                const data = {
                    bankName: document.getElementById('bankName').value,
                    investBank: document.getElementById('investBank').value,
                    date: document.getElementById('date').value,
                    receiptNo: document.getElementById('receiptNo').value,
                    amount: document.getElementById('amount').value,
                    period: document.getElementById('period').value,
                    matureDate: document.getElementById('matureDate').value,
                    rate: document.getElementById('rate').value,
                    interest: document.getElementById('interest').value,
                    chequeNo: document.getElementById('chequeNo').value
                };
                
                // ඇඩ් කරන ගමන් Table එකටත් දානවා
                const row = `<tr><td>${data.amount}</td><td>${data.investBank}</td><td>${data.receiptNo}</td><td>${data.interest}</td><td>${data.matureDate}</td></tr>`;
                document.getElementById('print-table-body').innerHTML += row;
                alert("දත්ත ඇතුළත් විය (Sheet එක සමඟ සම්බන්ධ වීමට Apps Script අවශ්‍යයි)");
            }

            if(action === 'search') {
                const id = document.getElementById('searchID').value;
                if(!id) return alert("අංකයක් ඇතුළත් කරන්න");
                document.getElementById('search-result').classList.remove('hidden');
                document.getElementById('result-text').innerText = "සෙවූ අංකය: " + id;
            }

            if(action === 'delete') {
                alert("මකා දැමීම සාර්ථකයි!");
                document.getElementById('search-result').classList.add('hidden');
            }

            if(action === 'clear') {
                document.getElementById('print-table-body').innerHTML = "";
                alert("මුද්‍රණ වගුව හිස් කරන ලදී!");
            }
        }
    </script>
</body>
</html>
